<style>
    #vizDropdown,
    #songDropdown {
        height: auto;
        width: auto;
        transform: translateY(-156%) translateX(-25%);
    }

    #toggleMusicHud {
        width: auto;
    }

</style>

<!-- Icon and App Name in  layout -->
<div class="app-brand-container">
    <div class="app-brand-logo">
        <i class="bi bi-soundwave" id="appIcon"></i>
        <h2 class="app-name" id="appName">Vibe</h2>
    </div>
    <p class="app-description" id="appDescription">Experience your music through stunning visuals, crafted to elevate
        every beat</p>
</div>

<div class="app-window">
    <!-- Visualizer section -->
    <canvas id="visualizer" width="1100" height="900"></canvas> <!-- 4:3 ratio -->

    <div class="app-controller-container">
        <!-- Button to toggle app-header -->
        <button id="toggleMusicHud" class="primary-button modern-tooltip smaller"
                data-tooltip="Toggle the music controls"><i
                class="bi bi-chevron-compact-down"></i></button>
        <!-- App Header -->
        <div class="app-controller">
            <div class="progress-area app-controller-item">
                <input type="range" id="progressBar" class="base-progress-bar" min="0" max="100" value="0">
            </div>
            <!-- HUD for music controls and display -->
            <div id="music-hud" class="app-controller-item">
                <div id="control-buttons" style="display: flex; width: auto">
                    <!--Skip backward button -->
                    <button id="skipBackwardBtn"
                            class="primary-button  modern-tooltip"
                            data-tooltip="10s backward">
                        <i class="bi bi-arrow-counterclockwise"></i>
                    </button>
                    <!-- Play button -->
                    <button id="playPauseBtn" class="primary-button modern-tooltip"  style="scale: 1.1"
                            data-tooltip="pause or play">
                        <i class="bi bi-play-fill"></i>
                    </button>
                    <!-- Skip forward button -->
                    <button id="skipForwardBtn" class="primary-button modern-tooltip"
                            data-tooltip="10s forward">
                        <i class="bi bi-arrow-clockwise"></i>
                    </button>
                </div>

                <!-- Info control -->
                <div class="row-layout">
                    <!-- Song Title -->
                    <span id="songTitle">Currently Playing</span>
                    <!-- Time Info -->
                    <div id="timeInfo" style="margin-left: var(--spacing-medium);">0:00/0:00</div>
                </div>

                <div id="vizSettings" class="app-controller-item" style="width: auto">
                    <!-- Song selector dropdown -->
                    <div style="margin-right: var(--spacing-medium)">
                        <button class="primary-button modern-tooltip" id="songDropdownBtn"
                                data-tooltip="Select Music from Predefined List">
                            <i class="bi bi-music-note-list"></i>
                        </button>
                        <ul id="songDropdown" class="modern-dropdown hidden">
                            <li data-url="./apps/music-viz/closed_my_eyes.mp3" class="modern-dropdown-item">Closed My Eyes
                            </li>
                            <li data-url="./apps/music-viz/i_need_you.mp3" class="modern-dropdown-item">I Need You</li>
                            <li data-url="./apps/music-viz/you_and_me.mp3" class="modern-dropdown-item">You And Me</li>
                        </ul>
                    </div>

                    <!-- Vizualizer dropdown -->
                    <div style="margin-right: var(--spacing-medium)">
                        <button class="primary-button modern-tooltip" id="vizDropDownBtn"
                                data-tooltip="Select your visualizer">
                            <i class="bi bi-ui-radios-grid"></i>
                        </button>
                        <ul id="vizDropdown" class="modern-dropdown hidden">
                            <li data-value="circles" data-icon="bi bi-ui-radios-grid" class="modern-dropdown-item selected">
                                LookUp
                            </li>
                            <li data-value="bars" data-icon="bi bi-bar-chart" class="modern-dropdown-item">Basic</li>
                            <li data-value="spiral" data-icon="bi bi-nut" class="modern-dropdown-item">GoNuts</li>
                        </ul>
                    </div>

                    <!-- Upload button -->
                    <div id="uploadButton" class="modern-tooltip" data-tooltip="Upload your music file"
                         style="margin-right: var(--spacing-medium)">
                        <label for="fileUpload" class="primary-button">
                            <i class="bi bi-upload"></i>
                        </label>
                        <input type="file" id="fileUpload" accept="audio/*" style="display: none">
                    </div>

                    <!-- Fullscreen button -->
                    <div id="fullscreenButton" class="modern-tooltip" data-tooltip="Toggle full screen mode">
                        <button id="toggleFullScreen" class="primary-button">
                            <i class="bi bi-arrows-fullscreen"></i>
                        </button>
                    </div>
                </div> <!-- settings -->
            </div>
        </div>
    </div>

</div>