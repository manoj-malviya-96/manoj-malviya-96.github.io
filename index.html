<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<!-- Load custom styles -->
<head>
    <meta charset="utf-8">
    <meta name="generator" content="quarto-1.4.545">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <script src="site_libs/quarto-nav/quarto-nav.js"></script>
    <script src="site_libs/quarto-nav/headroom.min.js"></script>
    <script src="site_libs/clipboard/clipboard.min.js"></script>
    <script src="site_libs/quarto-search/autocomplete.umd.js"></script>
    <script src="site_libs/quarto-search/fuse.min.js"></script>
    <script src="site_libs/quarto-search/quarto-search.js"></script>
    <meta name="quarto:offset" content="./">
    <script src="site_libs/quarto-listing/list.min.js"></script>
    <script src="site_libs/quarto-listing/quarto-listing.js"></script>
    <script src="site_libs/quarto-html/quarto.js"></script>
    <script src="site_libs/quarto-html/popper.min.js"></script>
    <script src="site_libs/quarto-html/tippy.umd.min.js"></script>
    <script src="site_libs/quarto-html/anchor.min.js"></script>
    <link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
    <link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet"
          id="quarto-text-highlighting-styles">
    <script src="site_libs/bootstrap/bootstrap.min.js"></script>
    <link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
    <link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
    <link href="https://unpkg.com/github-calendar/dist/github-calendar-responsive.css" rel="stylesheet">
    <link rel="preload" href="Mona-Sans.woff2" as="font" type="font/woff2" crossorigin>

    <script id="quarto-search-options" type="application/json">{
        "location": "navbar",
        "copy-button": false,
        "collapse-after": 3,
        "panel-placement": "end",
        "type": "overlay",
        "limit": 50,
        "keyboard-shortcut": [
            "f",
            "/",
            "s"
        ],
        "show-item-context": false,
        "language": {
            "search-no-results-text": "No results",
            "search-matching-documents-text": "matching documents",
            "search-copy-link-title": "Copy link to search",
            "search-hide-matches-text": "Hide additional matches",
            "search-more-match-text": "more match in this document",
            "search-more-matches-text": "more matches in this document",
            "search-clear-button-title": "Clear",
            "search-text-placeholder": "",
            "search-detached-cancel-button-title": "Cancel",
            "search-submit-button-title": "Submit",
            "search-label": "Search"
        }
    }</script>
    <link rel="stylesheet" href="styles.css">
    <link href="./assets/logo.svg" rel="icon" type="image/png">
    <title>Manoj Malviya</title>
</head>

<!-- body -->
<body class="dark-mode">

<script src="https://cdn.jsdelivr.net/pyodide/v0.23.3/full/pyodide.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
<script src="https://cdn.plot.ly/plotly-2.35.2.min.js" charset="utf-8"></script>
<script src="https://unpkg.com/github-calendar/dist/github-calendar.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jsmediatags/3.9.5/jsmediatags.min.js"></script>



<!-- header -->
<div id="header-placeholder" style="display: none;"></div>


<!-- Overlay with Three Dot Loading Spinner -->
<div id="content-placeholder-overlay" style="display: none;">
    <img src="./assets/logo.svg"
         style="
                color: var(--color-brand-primary);
                width: var(--spinner-size);
                height: var(--spinner-size);
                animation: rotationAnimation var(--transition-default) infinite ease-in-out;
         "
         alt="Logo"/>
</div>

<!-- main content -->
<div id="content-placeholder" style="display: none;"></div>


<!-- Load custom scripts: Note: LOAD IT AFTER PLACEHOLDER CONSTRUCTION TO ENSURE WE CAN USE IN COMMON -->
<script src="./src/helper.js"></script>
<script src="./src/plotly.js"></script>
<script src="./src/math.js"></script>
<script src="./src/github.js"></script>
<script src="./src/projects.js"></script>
<script src="./src/app.js"></script>

<!-- Main Scripts --->
<script src="./src/init.js"></script> <!-- initializing components -->
<script src="./src/main.js"></script>

<!-- Apps -->
<script src="./apps/music-viz/music-viz.js"></script>


<!-- Initialize the Website -->
<script>
    initHeader();
    initScrollBehavior();
    initMathJax();
    setupPopStateHandler();
    setupLoadPageUrlHandler();
</script>

<script id="quarto-html-after-body" type="application/javascript">
    document.addEventListener("DOMContentLoaded", function (event) {
        // Function to check if an element is a code annotation
        const isCodeAnnotation = (el) => {
            for (const clz of el.classList) {
                if (clz.startsWith('code-annotation-')) {
                    return true;
                }
            }
            return false;
        }

        // Initialize clipboard.js for code copy buttons
        const clipboard = new window.ClipboardJS('.code-copy-button', {
            text: function (trigger) {
                const codeEl = trigger.previousElementSibling.cloneNode(true);
                for (const childEl of codeEl.children) {
                    if (isCodeAnnotation(childEl)) {
                        childEl.remove();
                    }
                }
                return codeEl.innerText;
            }
        });

        // Event listener for successful copy action
        clipboard.on('success', function (e) {
            const button = e.trigger;
            button.blur(); // don't keep focus
            button.classList.add('code-copy-button-checked'); // flash "checked"
            var currentTitle = button.getAttribute("title");
            button.setAttribute("title", "Copied!");
            let tooltip;
            if (window.bootstrap) {
                button.setAttribute("data-bs-toggle", "tooltip");
                button.setAttribute("data-bs-placement", "left");
                button.setAttribute("data-bs-title", "Copied!");
                tooltip = new bootstrap.Tooltip(button, {
                    trigger: "manual",
                    customClass: "code-copy-button-tooltip",
                    offset: [0, -8]
                });
                tooltip.show();
            }
            runWithDelay(function () {
                if (tooltip) {
                    tooltip.hide();
                    button.removeAttribute("data-bs-title");
                    button.removeAttribute("data-bs-toggle");
                    button.removeAttribute("data-bs-placement");
                }
                button.setAttribute("title", currentTitle);
                button.classList.remove('code-copy-button-checked');
            }, 1000);
            e.clearSelection(); // clear code selection
        });

        // Variables to store selected annotation element
        let selectedAnnoteEl;

        // Function to generate selector for annotation
        const selectorForAnnotation = (cell, annotation) => {
            let cellAttr = 'data-code-cell="' + cell + '"';
            let lineAttr = 'data-code-annotation="' + annotation + '"';
            return 'span[' + cellAttr + '][' + lineAttr + ']';
        }

        // Function to select code lines based on annotation
        const selectCodeLines = (annoteEl) => {
            const doc = document;
            const targetCell = annoteEl.getAttribute("data-target-cell");
            const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
            const annoteSpan = document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
            const lines = annoteSpan.getAttribute("data-code-lines").split(",");
            const lineIds = lines.map((line) => {
                return targetCell + "-" + line;
            })
            let top = null;
            let height = null;
            let parent = null;
            if (lineIds.length > 0) {
                const el = document.getElementById(lineIds[0]);
                top = el.offsetTop;
                height = el.offsetHeight;
                parent = el.parentElement.parentElement;
                if (lineIds.length > 1) {
                    const lastEl = document.getElementById(lineIds[lineIds.length - 1]);
                    const bottom = lastEl.offsetTop + lastEl.offsetHeight;
                    height = bottom - top;
                }
                if (top !== null && height !== null && parent !== null) {
                    let div = document.getElementById("code-annotation-line-highlight");
                    if (div === null) {
                        div = document.createElement("div");
                        div.setAttribute("id", "code-annotation-line-highlight");
                        div.style.position = 'absolute';
                        parent.appendChild(div);
                    }
                    div.style.top = top - 2 + "px";
                    div.style.height = height + 4 + "px";
                    div.style.left = 0;
                    let gutterDiv = document.getElementById("code-annotation-line-highlight-gutter");
                    if (gutterDiv === null) {
                        gutterDiv = document.createElement("div");
                        gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                        gutterDiv.style.position = 'absolute';
                        const codeCell = document.getElementById(targetCell);
                        const gutter = codeCell.querySelector('.code-annotation-gutter');
                        gutter.appendChild(gutterDiv);
                    }
                    gutterDiv.style.top = top - 2 + "px";
                    gutterDiv.style.height = height + 4 + "px";
                }
                selectedAnnoteEl = annoteEl;
            }
        };

        // Function to unselect code lines
        const unselectCodeLines = () => {
            const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
            elementsIds.forEach((elId) => {
                const div = document.getElementById(elId);
                if (div) {
                    div.remove();
                }
            });
            selectedAnnoteEl = undefined;
        };

        // Handle positioning of the toggle on window resize
        window.addEventListener(
            "resize",
            throttle(() => {
                elRect = undefined;
                if (selectedAnnoteEl) {
                    selectCodeLines(selectedAnnoteEl);
                }
            }, 10)
        );

        // Function to throttle events
        function throttle(fn, ms) {
            let throttle = false;
            let timer;
            return (...args) => {
                if (!throttle) {
                    fn.apply(this, args);
                    throttle = true;
                } else {
                    if (timer) clearTimeout(timer);
                    timer = setTimeout(() => {
                        fn.apply(this, args);
                        timer = throttle = false;
                    }, ms);
                }
            };
        }

        // Attach click handler to the DT elements
        const annoteDls = document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
            annoteDlNode.addEventListener('click', (event) => {
                const clickedEl = event.target;
                if (clickedEl !== selectedAnnoteEl) {
                    unselectCodeLines();
                    const activeEl = document.querySelector('dt[data-target-cell].code-annotation-active');
                    if (activeEl) {
                        activeEl.classList.remove('code-annotation-active');
                    }
                    selectCodeLines(clickedEl);
                    clickedEl.classList.add('code-annotation-active');
                } else {
                    unselectCodeLines();
                    clickedEl.classList.remove('code-annotation-active');
                }
            });
        }
    });
</script>
</body>
</html>